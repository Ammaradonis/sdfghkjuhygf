generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model ClassType {
  id       Int            @id @default(autoincrement())
  name     String
  desc     String?
  imageUrl String?
  sessions ClassSession[]
}

model Trainer {
  id          Int            @id @default(autoincrement())
  name        String
  nickname    String?
  bio         String?
  photoUrl    String?
  specialties String
  sessions    ClassSession[] @relation("CoachSessions")
  Specialty   Specialty[]
}

model Specialty {
  id        Int      @id @default(autoincrement())
  name      String
  trainer   Trainer? @relation(fields: [trainerId], references: [id])
  trainerId Int?
}

model ClassSession {
  id          Int        @id @default(autoincrement())
  title       String
  description String?
  date        DateTime   // ✅ renamed consistently
  durationMin Int
  capacity    Int        // ✅ added
  location    String     // ✅ added
  coach       Trainer?   @relation("CoachSessions", fields: [coachId], references: [id])
  coachId     Int?
  bookings    Booking[]
  classType   ClassType? @relation(fields: [classTypeId], references: [id])
  classTypeId Int?
}

model Booking {
  id        Int          @id @default(autoincrement())
  name      String
  email     String
  createdAt DateTime     @default(now())
  session   ClassSession @relation(fields: [sessionId], references: [id])
  sessionId Int
}

model Testimonial {
  id       Int     @id @default(autoincrement())
  name     String
  location String
  quote    String
  photoUrl String?
  alt      String
}

model Newsletter {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  createdAt DateTime @default(now())
}
